<!DOCTYPE html>
<html lang="en">

    <head>
        <title>PerfectP2P Chat App</title>
        <link rel="stylesheet" href="index.css" />
    </head>

    <body class="page-wrapper">
        <div id="overlay" class="overlay"></div>
        <div id="registration-window" class="registration-popup">
            <div class="center">
                <h1 style="color: rgb(36, 36, 36); margin-top: 10%">Sign Up</h1>
            </div>

            <p>
                <input class="registration-el registration-input" type="text"
                    name="username" id="username-input"
                    placeholder="Username" />
            </p>
            <p>
                <input class="registration-el registration-input"
                    type="password" name="pwd" id="password-input"
                    placeholder="Password" />
            </p>
            <button class="registration-el download-button" style="height: 2vw"
                id="proceed-signup">
                Proceed
            </button>
        </div>
        <div id="signin-window" class="registration-popup">
            <div class="center">
                <h1 id="signin-greetings" style="color: rgb(36, 36, 36);
                    margin-top: 10%">
                    Sign In
                </h1>
            </div>

            <p>
                <input class="registration-el registration-input"
                    style="display: block" type="password" name="pwd"
                    id="signin-password-input" placeholder="Password" />
            </p>
            <label for="signin-keys-file" id="signin-keys-file-label"
                class="registration-el registration-input"
                style="display: block; cursor: pointer">Upload Keys</label>
            <input style="display: none" id="signin-keys-file" type="file" />
            <button class="registration-el download-button" style="height: 2vw"
                id="proceed-signin">
                Sign In!
            </button>
        </div>
        <div id="main-page">
            <div class="row" style="height: 100%; min-height: 100%">
                <div class="column" style="flex-grow: 1; margin-top: 2.5%">
                    <div class="dropdown">
                        <button class="dropdown-button" style="border-radius:
                            0%" id="contacts-dropdown-button">
                            Contacts
                        </button>
                        <div class="dropdown-content"
                            id="contacts-dropdown-list">
                            <div class="dropdown-content-row"
                                style="align-items: center; box-sizing: content-box;"
                                id="add-contact-contact-list-element">
                                <div class="dropdown-content-row-major-col" style="width:70%;">
                                    <div style="
                                    width:90%;
                                        height: 100%;
                                        display: flex;
                                        flex-direction: row;
                                        justify-content: center;
                                        align-items: center;
                                        ">
                                        <input name="nickname"
                                            id="nickname-input"
                                            placeholder="Nick or address..."
                                            style="width:
                                            100%; height: 35px; margin-left: 0%;
                                            padding-left: 0%;"
                                            />
                                    </div>
                                </div>
                                <div class="dropdown-content-row-major-col" style="width: 30%;">
                                    <button id="add-contact-button"
                                        class="dropdown-button" style="
                                        flex:none;
                                        height: 60px;
                                        width: 100%;
                                        text-align: center;
                                        font-size: medium;
                                        ">
                                        Add contact
                                    </button>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown">
                        <button class="dropdown-button"
                            id="connection-requests-dropdown-button">
                            Connection requests
                        </button>
                        <div class="dropdown-content"
                            id="connection-requests-dropdown-list"></div>
                    </div>
                    <div class="dropdown">
                        <button class="dropdown-button"
                            id="left-msgs-dropdown-button">
                            Missed chats
                        </button>
                        <div class="dropdown-content"
                            id="left-msgs-dropdown-list"></div>
                    </div>
                </div>

                <div class="column" style="flex-grow: 3">
                    <h1 style="
                        color: #ffffff;
                        margin-left: 10%;
                        font-family: 'Franklin Gothic Medium', 'Arial Narrow',
                        Arial,
                        sans-serif;
                        ">
                        PerfectP2P
                    </h1>

                    <div id="chat-container" class="chat-container">
                        <div class="chat-select-container">
                            <div class="chat-select-button"
                                id="chat-select-button">
                                <div class="column" style="flex-grow: 6">
                                    <div id="chat-selected-title"
                                        style="font-size: 1.3vw">
                                        Chat with...
                                    </div>
                                </div>
                                <div class="column" style="flex-grow: 2">
                                    <div class="chat-select-arrow-down"
                                        id="chat-select-arrow" style="right:
                                        -50%"></div>
                                </div>
                            </div>
                            <div class="chat-select-options-content"
                                id="chat-select-list"></div>
                        </div>

                        <div id="chat-history" class="chat-history-textarea"
                            disabled></div>
                        <div class="chat-input-row" style="bottom: 0px;">
                            <div class="column" style="flex-grow: 8;">
                            <input class="chat-input" name="chat-input"
                                id="chat-input" style="width:100%;" placeholder="Write message..."
                                />
                            </div>
                            <div class="column" style="flex-grow: 2;">
                            <button class="chat-send-button" id="chat-send-message">
                                Send
                            </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column" style="flex-grow: 1">
                    <button id="signinButton" class="signinButton">Sign In</button>
                    <button id="connectButton" class="connectButton">Connect</button>
                    <button id="downloadKeysButton"
                        class="download-keys-button">
                        Download Keys
                    </button>
                </div>
            </div>
        </div>
        
        <script id="contact-list-element-ejs-template" type="text/template">
      <div class="dropdown-content-row light-buttons-on-hover" <%if (emptyPlaceholder){%>id="empty-placeholder-contact-list-element" <%} else {%> id = "<%=username%>-contact-list-element" <%}%> >
          <div class="dropdown-content-row-major-col vertical-center" style="width:25%;">
              <%=username%>
          </div>
          <div class="dropdown-content-row-major-col vertical-center" id="<%=username%>-contact-address-copy-col" style="width:25%;">
          </div>
          <div class="dropdown-content-row-minor-col" style="width:25%">
          </div>
          <div class="dropdown-content-row-minor-col use-dropdown-content-row-height" style="width:25%">
              <%if (!emptyPlaceholder){%><button id="<%=username%>-request-button" class="dropdown-button" style="flex:none;width: 100%;text-align: center;font-size: medium;">Request chat</button><%}%>
          </div>
      </div>
    </script>
        <script id="connection-request-list-element-ejs-template"
            type="text/template">
      <div class="dropdown-content-row" id="<%=address%>-connection-list-div">
          <div class="dropdown-content-row-major-col vertical-center" style="width:23%">
              <%=username%>
          </div>
          <div class="dropdown-content-row-major-col vertical-center" id="<%=address%>-connection-address-copy-col" style="width:17%">
          </div>
          <div class="dropdown-content-row-major-col vertical-center" style="width:40%">
            <span style="overflow-wrap: nowrap;" id="<%=address%>-connection-shortmsg">Subject: <em><%=msg%></em></span>
          </div>
          <div class="dropdown-content-row-minor-col" style="width:20%">
              <button id="<%=username%>-respond-button" class="dropdown-button" style="flex:none;height:60px;width: 100%;text-align: center;font-size: medium;">Accept</button>
          </div>
      </div>
    </script>
        <script id="chat-list-element-ejs-template" type="text/template">
      <div class="chat-select-option-row"  id="<%=address%>-chat-list-div">
          <%=username%>
      </div>
    </script>
        <script id="left-msgs-list-element-ejs-template" type="text/template">
      <div class="dropdown-content-row" style="height:50px" id="<%=uniq%>-<%=address%>-left-msgs-list-div">
        <div class="column" style="">
            <div class="row">
                <div class="column" style="flex-grow: 1;">
                    <%=username%>
                </div>
                <div class="column" style="flex-grow: 1;" id="<%=address%>-left-msg-address-copy-col">
                </div>
                <div class="column" style="flex-grow: 4"> </div>
            </div>
            <div class="row" style ="margin-top:0%;">
                <span style="color:rgb(140, 140, 140); font-size:medium; margin-top:2%;" id="<%=uniq%>-<%=address%>-left-msgs-shortmsg"><%=msg%></span>
            </div>
        </div>
      </div>
    </script>

    <script id="copyable-address-element-ejs-template" type="text/template">
        <div class="tooltip">
            <span class="copy-address-tooltip-descr" id="<%=uniq%>-<%=address%>-<%=semantic%>-address-copy-button"><%=shortAddress%></span>
            <span class="tooltiptext" id="<%=uniq%>-<%=address%>-<%=semantic%>-address-copy-tip">Copy</span>
        </div>
      </script>

        <script src="sweetalert2.all.min.js" type="text/javascript"></script>
        <script src="crypto-js.min.js" type="text/javascript"></script>
        <script src="sdp-minimizer-standalone.js" type="text/javascript"></script>
        <script src="index.js" type="module"></script>
    </body>

</html>